{"ast":null,"code":"import _slicedToArray from \"/var/www/reactapps/testing-app-refactoring/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { useState } from \"react\"; // console.log(formState);\n\nfunction LoginRegisterValidation(fields) {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        formState = _useState2[0],\n        setFormState = _useState2[1];\n\n  const _useState3 = useState(false),\n        _useState4 = _slicedToArray(_useState3, 2),\n        fieldsChecked = _useState4[0],\n        setFieldsChecked = _useState4[1];\n\n  function addValue(key, value) {\n    setFormState([...formState.filter(el => el.key !== key), {\n      key: key,\n      value: value,\n      error: retrieveErrors(key, value)\n    }]);\n  }\n\n  function hasErrors(key) {\n    let element = formState.filter(el => el.key === key).pop();\n    if (element) return element.error;\n  }\n\n  function submitForm() {\n    let checking = [];\n\n    for (let field in fields) {\n      if (formState.filter(el => el.key === field).length === 0) {\n        checking.push({\n          key: field,\n          value: '',\n          error: retrieveErrors(field, 0)\n        });\n      }\n    }\n\n    if (!fieldsChecked) {\n      if (checking.filter(el => el.error !== false).length < 1) {\n        window.location.href = \"/mainPage\";\n      }\n    } else {\n      if (formState.filter(el => el.error !== false).length < 1) {\n        window.location.href = \"/mainPage\";\n      }\n    }\n\n    setFormState([...formState, ...checking]);\n    setFieldsChecked(true);\n  }\n\n  function retrieveErrors(key, value) {\n    if (!value || value.length < 1) {\n      return {\n        content: 'this is required field',\n        pointing: 'left'\n      };\n    }\n\n    switch (key) {\n      case fields.firstName:\n        if (value.length < 5) {\n          return {\n            content: 'Not enough characters',\n            pointing: 'left'\n          };\n        }\n\n        return false;\n\n      case fields.lastName:\n        if (value.length < 2) {\n          return {\n            content: 'Not enough characters',\n            pointing: 'left'\n          };\n        }\n\n        return false;\n\n      case fields.password:\n        if (value.length < 4) {\n          return {\n            content: 'Not enough characters',\n            pointing: 'left'\n          };\n        }\n\n        return false;\n\n      case fields.terms:\n        if (!value) {\n          return {\n            content: 'You must agree to the terms and conditions',\n            pointing: 'left'\n          };\n        }\n\n        return false;\n\n      case fields.email:\n        if (!value.match('^([a-z0-9_-]+\\\\.)*[a-z0-9_-]+@[a-z0-9_-]+(\\\\.[a-z0-9_-]+)*\\\\.[a-z]{2,6}$')) {\n          return {\n            content: 'Incorrect email address',\n            pointing: 'left'\n          };\n        }\n\n        return false;\n\n      default:\n        return false;\n    }\n  }\n}\n\nexport default LoginRegisterValidation;","map":{"version":3,"sources":["/var/www/reactapps/testing-app-refactoring/src/containers/pages/validation/LoginRegisterValidation.js"],"names":["useState","LoginRegisterValidation","fields","formState","setFormState","fieldsChecked","setFieldsChecked","addValue","key","value","filter","el","error","retrieveErrors","hasErrors","element","pop","submitForm","checking","field","length","push","window","location","href","content","pointing","firstName","lastName","password","terms","email","match"],"mappings":"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","sourcesContent":["import {useState} from \"react\";\n\n\n// console.log(formState);\n\nfunction LoginRegisterValidation(fields) {\n\n    const [formState, setFormState] = useState([]);\n    const [fieldsChecked, setFieldsChecked] = useState(false);\n\n    function addValue(key, value) {\n        setFormState(\n            [...formState.filter(el => el.key !== key),\n                {\n                    key: key,\n                    value: value,\n                    error: retrieveErrors(key, value)\n                }\n            ]\n        );\n    }\n\n function hasErrors(key) {\n        let element = formState.filter(el => el.key === key).pop();\n        if (element) return element.error;\n\n    }\n\n\n    function submitForm() {\n        let checking = [];\n        for (let field in fields) {\n            if (formState.filter(el => el.key === field).length === 0) {\n                checking.push({\n                    key: field,\n                    value: '',\n                    error: retrieveErrors(field, 0)\n                });\n            }\n        }\n        if (!fieldsChecked) {\n            if (checking.filter(el => el.error !== false).length < 1) {\n                window.location.href = \"/mainPage\"\n            }\n        } else {\n            if (formState.filter(el => el.error !== false).length < 1) {\n                window.location.href = \"/mainPage\"\n            }\n        }\n        setFormState([...formState, ...checking]);\n        setFieldsChecked(true);\n\n    }\n\n     function retrieveErrors(key, value) {\n        if (!value || value.length < 1) {\n            return {\n                content: 'this is required field',\n                pointing: 'left'\n            };\n        }\n        switch (key) {\n            case fields.firstName:\n                if (value.length < 5) {\n                    return {\n                        content: 'Not enough characters',\n                        pointing: 'left'\n                    };\n                }\n                return false;\n            case fields.lastName:\n                if (value.length < 2) {\n                    return {\n                        content: 'Not enough characters',\n                        pointing: 'left'\n                    };\n                }\n                return false;\n            case fields.password:\n                if (value.length < 4) {\n                    return {\n                        content: 'Not enough characters',\n                        pointing: 'left'\n                    };\n                }\n                return false;\n            case fields.terms:\n                if (!value) {\n                    return {\n                        content: 'You must agree to the terms and conditions',\n                        pointing: 'left'\n                    };\n                }\n                return false;\n            case fields.email:\n                if (!value.match('^([a-z0-9_-]+\\\\.)*[a-z0-9_-]+@[a-z0-9_-]+(\\\\.[a-z0-9_-]+)*\\\\.[a-z]{2,6}$')) {\n                    return {\n                        content: 'Incorrect email address',\n                        pointing: 'left'\n                    };\n                }\n                return false;\n            default:\n                return false\n        }\n    }\n}\n\nexport default LoginRegisterValidation;"]},"metadata":{},"sourceType":"module"}